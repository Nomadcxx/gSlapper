
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Complete documentation for gSlapper - GStreamer-based wallpaper player for Wayland">
      
      
        <meta name="author" content="Nomadcxx">
      
      
        <link rel="canonical" href="https://nomadcxx.github.io/gSlapper/development/systemd-service/">
      
      
        <link rel="prev" href="../architecture/">
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Systemd Service - gSlapper Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Code:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Fira Code";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#systemd-service-development-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="gSlapper Documentation" class="md-header__button md-logo" aria-label="gSlapper Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            gSlapper Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Systemd Service
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Nomadcxx/gSlapper" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Nomadcxx/gSlapper
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/" class="md-tabs__link">
          
  
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user-guide/" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../advanced/" class="md-tabs__link">
          
  
  
    
  
  Advanced

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../index.md" class="md-tabs__link">
          
  
  
    
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../TO_IMPLEMENT.md" class="md-tabs__link">
          
  
  
    
  
  Project

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="gSlapper Documentation" class="md-nav__button md-logo" aria-label="gSlapper Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    gSlapper Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Nomadcxx/gSlapper" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Nomadcxx/gSlapper
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../getting-started/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../user-guide/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/video-wallpapers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Video Wallpapers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/static-images/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Static Images
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/scaling-modes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scaling Modes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/ipc-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IPC Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/command-line-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command Line Options
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/persistent-wallpapers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Persistent Wallpapers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../advanced/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Advanced
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Advanced
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/transitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transitions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/multi-monitor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-Monitor Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance Tuning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    None
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../building/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Building from Source
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Systemd Service
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Systemd Service
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Details
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-modes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service Modes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Service Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-service-mode-systemd" class="md-nav__link">
    <span class="md-ellipsis">
      
        User Service Mode (--systemd)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-mode-default" class="md-nav__link">
    <span class="md-ellipsis">
      
        Manual Mode (default)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-management-in-systemd-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        State Management in Systemd Service
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State Management in Systemd Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#state-saving-triggers" class="md-nav__link">
    <span class="md-ellipsis">
      
        State Saving Triggers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-file-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        State File Format
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-file-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        State File Operations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-file-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service File Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Service File Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-service-all-monitors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Single Service (All Monitors)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#per-monitor-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        Per-Monitor Template
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-system-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Build System Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build System Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional-systemd-dependency" class="md-nav__link">
    <span class="md-ellipsis">
      
        Optional systemd Dependency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-file-installation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service File Installation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Required Environment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Optional Environment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service Lifecycle
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Service Lifecycle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#startup-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Startup Sequence
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reload-sequence-sighup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reload Sequence (SIGHUP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shutdown-sequence-sigterm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Shutdown Sequence (SIGTERM)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-service-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multi-Service Deployment
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multi-Service Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-service-same-wallpaper-all-monitors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Single Service (Same Wallpaper All Monitors)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-services-different-wallpaper-per-monitor" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multiple Services (Different Wallpaper Per Monitor)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-development" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting (Development)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting (Development)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#service-fails-to-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service Fails to Start
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-starts-but-no-wallpaper" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service Starts But No Wallpaper
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-not-persisting" class="md-nav__link">
    <span class="md-ellipsis">
      
        State Not Persisting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systemd-support-disabled" class="md-nav__link">
    <span class="md-ellipsis">
      
        systemd Support Disabled
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparison-with-swww" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comparison with swww
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Comparison with swww">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#swww-daemon-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        swww-daemon Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gslapper-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        gSlapper Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-differences" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Differences
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-enhancements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Future Enhancements
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Project
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Project
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TO_IMPLEMENT.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TO IMPLEMENT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Details
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-modes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service Modes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Service Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-service-mode-systemd" class="md-nav__link">
    <span class="md-ellipsis">
      
        User Service Mode (--systemd)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-mode-default" class="md-nav__link">
    <span class="md-ellipsis">
      
        Manual Mode (default)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-management-in-systemd-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        State Management in Systemd Service
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State Management in Systemd Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#state-saving-triggers" class="md-nav__link">
    <span class="md-ellipsis">
      
        State Saving Triggers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-file-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        State File Format
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-file-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        State File Operations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-file-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service File Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Service File Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-service-all-monitors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Single Service (All Monitors)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#per-monitor-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        Per-Monitor Template
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-system-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Build System Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build System Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional-systemd-dependency" class="md-nav__link">
    <span class="md-ellipsis">
      
        Optional systemd Dependency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-file-installation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service File Installation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Required Environment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Optional Environment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service Lifecycle
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Service Lifecycle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#startup-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Startup Sequence
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reload-sequence-sighup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reload Sequence (SIGHUP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shutdown-sequence-sigterm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Shutdown Sequence (SIGTERM)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-service-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multi-Service Deployment
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multi-Service Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-service-same-wallpaper-all-monitors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Single Service (Same Wallpaper All Monitors)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-services-different-wallpaper-per-monitor" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multiple Services (Different Wallpaper Per Monitor)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-development" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting (Development)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting (Development)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#service-fails-to-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service Fails to Start
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-starts-but-no-wallpaper" class="md-nav__link">
    <span class="md-ellipsis">
      
        Service Starts But No Wallpaper
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-not-persisting" class="md-nav__link">
    <span class="md-ellipsis">
      
        State Not Persisting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systemd-support-disabled" class="md-nav__link">
    <span class="md-ellipsis">
      
        systemd Support Disabled
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparison-with-swww" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comparison with swww
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Comparison with swww">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#swww-daemon-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        swww-daemon Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gslapper-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        gSlapper Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-differences" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Differences
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-enhancements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Future Enhancements
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="systemd-service-development-documentation">Systemd Service (Development Documentation)<a class="headerlink" href="#systemd-service-development-documentation" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>gSlapper includes systemd service integration for automatic wallpaper restoration on login. This is <strong>optional</strong> - gSlapper works perfectly fine without systemd.</p>
<h2 id="implementation-details">Implementation Details<a class="headerlink" href="#implementation-details" title="Permanent link">&para;</a></h2>
<h3 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">&para;</a></h3>
<p><strong>Two-Component Design</strong>:
1. <strong>Main Program</strong> (<code>gslapper</code> binary) - Runs wallpaper display
2. <strong>Helper Process</strong> (<code>gslapper-holder</code>) - Gatekeeper for stoplist checking</p>
<p><strong>Why Helper Process?</strong>
- Separates stoplist monitoring from main event loop
- Allows graceful lifecycle transitions
- Manages process restarts (like mpvpaper's approach)</p>
<h3 id="service-modes">Service Modes<a class="headerlink" href="#service-modes" title="Permanent link">&para;</a></h3>
<h4 id="user-service-mode-systemd">User Service Mode (<code>--systemd</code>)<a class="headerlink" href="#user-service-mode-systemd" title="Permanent link">&para;</a></h4>
<p><strong>Behavior</strong>:
- Sends <code>sd_notify(READY=1)</code> when wallpaper is displayed
- Saves state on <code>SIGHUP</code> (reload signal)
- Exits cleanly on <code>SIGTERM</code> (systemd shutdown)</p>
<p><strong>Activation</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="cp">#ifdef HAVE_SYSTEMD</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;systemd/sd-daemon.h&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1">// Notify systemd when ready</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">sd_notify</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;READY=1</span><span class="se">\n</span><span class="s">STATUS=Wallpapers loaded and playing&quot;</span><span class="p">);</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1">// Notify systemd on shutdown</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">sd_notify</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;STOPPING=1</span><span class="se">\n</span><span class="s">STATUS=Shutting down&quot;</span><span class="p">);</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="cp">#endif</span>
</code></pre></div></p>
<h4 id="manual-mode-default">Manual Mode (default)<a class="headerlink" href="#manual-mode-default" title="Permanent link">&para;</a></h4>
<p><strong>Behavior</strong>:
- Runs until <code>SIGINT</code> (Ctrl+C) or <code>SIGTERM</code>
- Saves state on exit (if not disabled with <code>--no-save-state</code>)
- No systemd notifications</p>
<hr />
<h2 id="state-management-in-systemd-service">State Management in Systemd Service<a class="headerlink" href="#state-management-in-systemd-service" title="Permanent link">&para;</a></h2>
<h3 id="state-saving-triggers">State Saving Triggers<a class="headerlink" href="#state-saving-triggers" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Automatic on Exit</strong>: When service stops (SIGTERM, SIGHUP)</li>
<li><strong>Explicit Save</strong>: Via IPC <code>save-state</code> command or <code>--save-state</code> flag</li>
<li><strong>SIGHUP Reload</strong>: Service reload triggers state save + restart</li>
</ol>
<h3 id="state-file-format">State File Format<a class="headerlink" href="#state-file-format" title="Permanent link">&para;</a></h3>
<p><strong>Location</strong>: <code>~/.local/state/gslapper/state-&lt;output&gt;.txt</code></p>
<p><strong>Format</strong> (Simple key=value, not JSON):
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>version=1
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>output=DP-1
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>path=/home/user/Videos/wallpaper.mp4
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>is_image=false
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>options=loop panscan=0.8
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>position=123.45
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>paused=0
</code></pre></div></p>
<h3 id="state-file-operations">State File Operations<a class="headerlink" href="#state-file-operations" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">// From state.c</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="nf">get_state_file_path</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">output_name</span><span class="p">);</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">save_state_file</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">wallpaper_state</span><span class="w"> </span><span class="o">*</span><span class="n">state</span><span class="p">);</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">load_state_file</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">wallpaper_state</span><span class="w"> </span><span class="o">*</span><span class="n">state</span><span class="p">);</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="kt">void</span><span class="w"> </span><span class="nf">free_wallpaper_state</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">wallpaper_state</span><span class="w"> </span><span class="o">*</span><span class="n">state</span><span class="p">);</span>
</code></pre></div>
<p><strong>Safety Features</strong>:
- <strong>Atomic writes</strong>: Write to <code>.tmp</code> file, then rename
- <strong>File locking</strong>: <code>flock()</code> prevents concurrent writes
- <strong>Permissions</strong>: State files set to <code>0600</code> (user-only)
- <strong>Backups</strong>: Automatic backup before overwriting</p>
<hr />
<h2 id="service-file-configuration">Service File Configuration<a class="headerlink" href="#service-file-configuration" title="Permanent link">&para;</a></h2>
<h3 id="single-service-all-monitors">Single Service (All Monitors)<a class="headerlink" href="#single-service-all-monitors" title="Permanent link">&para;</a></h3>
<p><strong>File</strong>: <code>/usr/lib/systemd/user/gslapper.service</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">[Unit]</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="na">Description</span><span class="o">=</span><span class="s">gSlapper Wallpaper Service</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="na">Documentation</span><span class="o">=</span><span class="s">https://nomadcxx.github.io/gSlapper/</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="na">After</span><span class="o">=</span><span class="s">graphical-session.target</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="na">Wants</span><span class="o">=</span><span class="s">graphical-session.target</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="k">[Service]</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="na">Type</span><span class="o">=</span><span class="s">notify</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="na">ExecStart</span><span class="o">=</span><span class="s">/usr/bin/gslapper --systemd --restore &#39;*&#39;</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="na">ExecReload</span><span class="o">=</span><span class="s">/bin/kill -HUP $MAINPID</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="na">Restart</span><span class="o">=</span><span class="s">on-failure</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="na">RestartSec</span><span class="o">=</span><span class="s">5</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="na">TimeoutStopSec</span><span class="o">=</span><span class="s">30</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="na">EnvironmentFile</span><span class="o">=</span><span class="s">%h/.config/gslapper/environment</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="na">Environment</span><span class="o">=</span><span class="s">XDG_RUNTIME_DIR=%t</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="na">MemoryMax</span><span class="o">=</span><span class="s">512M</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="na">CPUQuota</span><span class="o">=</span><span class="s">50%</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="na">NoNewPrivileges</span><span class="o">=</span><span class="s">true</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="na">PrivateTmp</span><span class="o">=</span><span class="s">true</span>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="k">[Install]</span>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="na">WantedBy</span><span class="o">=</span><span class="s">default.target</span>
</code></pre></div>
<p><strong>Key Directives</strong>:
- <code>Type=notify</code> - Waits for <code>sd_notify(READY=1)</code> before considering service started
- <code>ExecStart</code> - Uses <code>--systemd --restore</code> flags
- <code>ExecReload</code> - Sends <code>SIGHUP</code> for state save + restart
- <code>EnvironmentFile</code> - Loads <code>WAYLAND_DISPLAY</code> from user config
- <code>Environment=XDG_RUNTIME_DIR=%t</code> - Sets Wayland runtime directory
- <code>MemoryMax</code>, <code>CPUQuota</code> - Resource limits for safety</p>
<h3 id="per-monitor-template">Per-Monitor Template<a class="headerlink" href="#per-monitor-template" title="Permanent link">&para;</a></h3>
<p><strong>File</strong>: <code>/usr/lib/systemd/user/gslapper@.service</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">[Unit]</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="na">Description</span><span class="o">=</span><span class="s">gSlapper Wallpaper Service for %i</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="na">Documentation</span><span class="o">=</span><span class="s">https://nomadcxx.github.io/gSlapper/</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="na">After</span><span class="o">=</span><span class="s">graphical-session.target</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="na">Wants</span><span class="o">=</span><span class="s">graphical-session.target</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="k">[Service]</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="na">Type</span><span class="o">=</span><span class="s">notify</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="na">ExecStart</span><span class="o">=</span><span class="s">/usr/bin/gslapper --systemd --restore %i</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="na">ExecReload</span><span class="o">=</span><span class="s">/bin/kill -HUP $MAINPID</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="na">Restart</span><span class="o">=</span><span class="s">on-failure</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="na">RestartSec</span><span class="o">=</span><span class="s">5</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="na">TimeoutStopSec</span><span class="o">=</span><span class="s">30</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="na">EnvironmentFile</span><span class="o">=</span><span class="s">%h/.config/gslapper/environment</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="na">Environment</span><span class="o">=</span><span class="s">XDG_RUNTIME_DIR=%t</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="na">MemoryMax</span><span class="o">=</span><span class="s">512M</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="na">CPUQuota</span><span class="o">=</span><span class="s">50%</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="na">NoNewPrivileges</span><span class="o">=</span><span class="s">true</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="na">PrivateTmp</span><span class="o">=</span><span class="s">true</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="k">[Install]</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="na">WantedBy</span><span class="o">=</span><span class="s">default.target</span>
</code></pre></div>
<p><strong>Usage</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Enable per monitor</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>systemctl<span class="w"> </span>--user<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>gslapper@DP-1.service
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>systemctl<span class="w"> </span>--user<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>gslapper@DP-2.service
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="c1"># Each instance has separate state file:</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="c1"># ~/.local/state/gslapper/state-DP-1.txt</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="c1"># ~/.local/state/gslapper/state-DP-2.txt</span>
</code></pre></div></p>
<hr />
<h2 id="build-system-integration">Build System Integration<a class="headerlink" href="#build-system-integration" title="Permanent link">&para;</a></h2>
<h3 id="optional-systemd-dependency">Optional systemd Dependency<a class="headerlink" href="#optional-systemd-dependency" title="Permanent link">&para;</a></h3>
<p><strong>meson.build</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c"># Optional systemd support</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">systemd_dep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">dependency</span><span class="p">(</span><span class="s">&#39;libsystemd&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">required</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="k">if</span><span class="w"> </span><span class="n">systemd_dep</span><span class="p">.</span><span class="n">found</span><span class="p">()</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span><span class="nb">add_project_arguments</span><span class="p">(</span><span class="s">&#39;-DHAVE_SYSTEMD&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">language</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;c&#39;</span><span class="p">)</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">  </span><span class="nb">message</span><span class="p">(</span><span class="s">&#39;Systemd support enabled&#39;</span><span class="p">)</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="k">else</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">  </span><span class="nb">message</span><span class="p">(</span><span class="s">&#39;Systemd support disabled (libsystemd not found)&#39;</span><span class="p">)</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="k">endif</span>
</code></pre></div></p>
<p><strong>Compilation Flags</strong>:
- <code>HAVE_SYSTEMD</code> - Defined when libsystemd is found
- Code wraps systemd calls in <code>#ifdef HAVE_SYSTEMD</code></p>
<h3 id="service-file-installation">Service File Installation<a class="headerlink" href="#service-file-installation" title="Permanent link">&para;</a></h3>
<p><strong>PKGBUILD</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>package<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="c1"># ... existing install commands ...</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="c1"># Install systemd user service files</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span>install<span class="w"> </span>-Dm644<span class="w"> </span>gslapper.service<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">        </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">pkgdir</span><span class="si">}</span><span class="s2">/usr/lib/systemd/user/gslapper.service&quot;</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span>install<span class="w"> </span>-Dm644<span class="w"> </span>gslapper@.service<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">        </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">pkgdir</span><span class="si">}</span><span class="s2">/usr/lib/systemd/user/gslapper@.service&quot;</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="o">}</span>
</code></pre></div></p>
<hr />
<h2 id="environment-variables">Environment Variables<a class="headerlink" href="#environment-variables" title="Permanent link">&para;</a></h2>
<h3 id="required-environment">Required Environment<a class="headerlink" href="#required-environment" title="Permanent link">&para;</a></h3>
<p><strong><code>WAYLAND_DISPLAY</code></strong> (Required):
- Wayland display socket (e.g., <code>wayland-0</code>, <code>wayland-1</code>)
- Must be set for gSlapper to connect to compositor</p>
<p><strong>Configuration</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># Create environment file</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>~/.config/gslapper
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;WAYLAND_DISPLAY=</span><span class="nv">$WAYLAND_DISPLAY</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>~/.config/gslapper/environment
</code></pre></div></p>
<h3 id="optional-environment">Optional Environment<a class="headerlink" href="#optional-environment" title="Permanent link">&para;</a></h3>
<p><strong><code>XDG_RUNTIME_DIR</code></strong> (Automatically set by systemd):
- User runtime directory (e.g., <code>/run/user/1000</code>)
- Used for Wayland socket access
- Set automatically by systemd service (<code>Environment=XDG_RUNTIME_DIR=%t</code>)</p>
<p><strong><code>XDG_STATE_HOME</code></strong> (Optional):
- Override default state directory
- If set: <code>$XDG_STATE_HOME/gslapper/</code>
- If not set: <code>$HOME/.local/state/gslapper/</code></p>
<hr />
<h2 id="service-lifecycle">Service Lifecycle<a class="headerlink" href="#service-lifecycle" title="Permanent link">&para;</a></h2>
<h3 id="startup-sequence">Startup Sequence<a class="headerlink" href="#startup-sequence" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Service Start</strong> (systemd)</li>
<li><strong>Load Environment</strong> - Read <code>~/.config/gslapper/environment</code></li>
<li><strong>Load State</strong> - Read from <code>~/.local/state/gslapper/state-*.txt</code></li>
<li><strong>Initialize Wayland</strong> - Connect to compositor</li>
<li><strong>Initialize GStreamer</strong> - Set up pipeline for video/image</li>
<li><strong>Display Wallpaper</strong> - Render to layer surface</li>
<li><strong>Notify Ready</strong> - <code>sd_notify(READY=1)</code></li>
<li><strong>Service Active</strong> (systemd considers service started)</li>
</ol>
<h3 id="reload-sequence-sighup">Reload Sequence (SIGHUP)<a class="headerlink" href="#reload-sequence-sighup" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Receive Signal</strong> - Systemd sends <code>SIGHUP</code></li>
<li><strong>Save Current State</strong> - Write position, pause state, options</li>
<li><strong>Stop GStreamer</strong> - Clean shutdown of pipeline</li>
<li><strong>Reload State</strong> - Load saved state from file</li>
<li><strong>Restart Pipeline</strong> - Initialize GStreamer with saved config</li>
<li><strong>Resume Playback</strong> - Continue from saved position</li>
<li><strong>Service Active</strong> (systemd continues service)</li>
</ol>
<h3 id="shutdown-sequence-sigterm">Shutdown Sequence (SIGTERM)<a class="headerlink" href="#shutdown-sequence-sigterm" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Receive Signal</strong> - Systemd sends <code>SIGTERM</code></li>
<li><strong>Notify Stopping</strong> - <code>sd_notify(STOPPING=1)</code></li>
<li><strong>Save Current State</strong> - Write final state</li>
<li><strong>Stop GStreamer</strong> - Clean shutdown</li>
<li><strong>Cleanup Wayland</strong> - Destroy surfaces, close display</li>
<li><strong>Exit</strong> - Process terminates</li>
<li><strong>Service Stopped</strong> (systemd marks service as stopped)</li>
</ol>
<hr />
<h2 id="multi-service-deployment">Multi-Service Deployment<a class="headerlink" href="#multi-service-deployment" title="Permanent link">&para;</a></h2>
<h3 id="single-service-same-wallpaper-all-monitors">Single Service (Same Wallpaper All Monitors)<a class="headerlink" href="#single-service-same-wallpaper-all-monitors" title="Permanent link">&para;</a></h3>
<p><strong>When to use</strong>:
- Same wallpaper on all monitors
- Simplified setup
- Single state file</p>
<p><strong>Configuration</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># Enable single service</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>systemctl<span class="w"> </span>--user<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>gslapper.service
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="c1"># State file:</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="c1"># ~/.local/state/gslapper/state.txt (for &#39;*&#39; output)</span>
</code></pre></div></p>
<h3 id="multiple-services-different-wallpaper-per-monitor">Multiple Services (Different Wallpaper Per Monitor)<a class="headerlink" href="#multiple-services-different-wallpaper-per-monitor" title="Permanent link">&para;</a></h3>
<p><strong>When to use</strong>:
- Different wallpapers on each monitor
- Independent control per monitor
- Per-monitor state management</p>
<p><strong>Configuration</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># Disable single service if running</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>systemctl<span class="w"> </span>--user<span class="w"> </span>disable<span class="w"> </span>gslapper.service
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="c1"># Enable per-monitor services</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>systemctl<span class="w"> </span>--user<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>gslapper@DP-1.service
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>systemctl<span class="w"> </span>--user<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>gslapper@DP-2.service
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>systemctl<span class="w"> </span>--user<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>gslapper@DP-3.service
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="c1"># Each has its own state file:</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="c1"># ~/.local/state/gslapper/state-DP-1.txt</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="c1"># ~/.local/state/gslapper/state-DP-2.txt</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="c1"># ~/.local/state/gslapper/state-DP-3.txt</span>
</code></pre></div></p>
<p><strong>State Files</strong>:
- Each instance reads/writes its own state file
- No conflicts between instances
- Independent video positions per monitor</p>
<hr />
<h2 id="troubleshooting-development">Troubleshooting (Development)<a class="headerlink" href="#troubleshooting-development" title="Permanent link">&para;</a></h2>
<h3 id="service-fails-to-start">Service Fails to Start<a class="headerlink" href="#service-fails-to-start" title="Permanent link">&para;</a></h3>
<p><strong>Check logs</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>journalctl<span class="w"> </span>--user<span class="w"> </span>-u<span class="w"> </span>gslapper.service<span class="w"> </span>-n<span class="w"> </span><span class="m">50</span>
</code></pre></div></p>
<p><strong>Common issues</strong>:
1. <strong>Missing <code>WAYLAND_DISPLAY</code></strong>:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Error: Unable to connect to compositor
</code></pre></div>
   <strong>Fix</strong>: Verify <code>~/.config/gslapper/environment</code> contains correct value</p>
<ol>
<li>
<p><strong>No state file</strong> (when using <code>--restore</code>):
   <div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>Warning: State file not found, starting fresh
</code></pre></div>
   <strong>Fix</strong>: Not an error, service will start with no wallpaper</p>
</li>
<li>
<p><strong>File not found</strong> (path in state file):
   <div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>Error: File does not exist: /path/to/wallpaper.mp4
</code></pre></div>
   <strong>Fix</strong>: Update wallpaper path or fix state file</p>
</li>
</ol>
<h3 id="service-starts-but-no-wallpaper">Service Starts But No Wallpaper<a class="headerlink" href="#service-starts-but-no-wallpaper" title="Permanent link">&para;</a></h3>
<p><strong>Debug steps</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># Check service status</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>systemctl<span class="w"> </span>--user<span class="w"> </span>status<span class="w"> </span>gslapper.service
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="c1"># View full logs</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>journalctl<span class="w"> </span>--user<span class="w"> </span>-u<span class="w"> </span>gslapper.service<span class="w"> </span>-f
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="c1"># Check state file</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>cat<span class="w"> </span>~/.local/state/gslapper/state-*.txt
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="c1"># Verify file exists</span>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="nb">test</span><span class="w"> </span>-f<span class="w"> </span>/path/to/wallpaper.mp4<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;OK&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Missing&quot;</span>
</code></pre></div></p>
<h3 id="state-not-persisting">State Not Persisting<a class="headerlink" href="#state-not-persisting" title="Permanent link">&para;</a></h3>
<p><strong>Check</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1"># Verify state directory exists and is writable</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>ls<span class="w"> </span>-la<span class="w"> </span>~/.local/state/gslapper/
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="c1"># Check state file permissions</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>stat<span class="w"> </span>~/.local/state/gslapper/state-*.txt
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="c1"># Manual test</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>gslapper<span class="w"> </span>--save-state
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="c1"># Should save to state file</span>
</code></pre></div></p>
<h3 id="systemd-support-disabled">systemd Support Disabled<a class="headerlink" href="#systemd-support-disabled" title="Permanent link">&para;</a></h3>
<p><strong>If building without libsystemd</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>Systemd support disabled (libsystemd not found)
</code></pre></div></p>
<p><strong>Result</strong>:
- <code>--systemd</code> flag still works but no <code>sd_notify()</code> calls
- Service will still work but <code>Type=notify</code> won't wait for READY
- Consider using <code>Type=simple</code> instead</p>
<hr />
<h2 id="comparison-with-swww">Comparison with swww<a class="headerlink" href="#comparison-with-swww" title="Permanent link">&para;</a></h2>
<h3 id="swww-daemon-architecture">swww-daemon Architecture<a class="headerlink" href="#swww-daemon-architecture" title="Permanent link">&para;</a></h3>
<p><strong>Single Process</strong>:
- <code>swww-daemon</code> runs continuously
- Manages all outputs in one process
- Automatic cache restoration on startup
- No explicit state file (uses shared memory)</p>
<p><strong>Service File</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="k">[Service]</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="na">Type</span><span class="o">=</span><span class="s">simple</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="na">ExecStart</span><span class="o">=</span><span class="s">/usr/bin/swww-daemon</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="na">Restart</span><span class="o">=</span><span class="s">on-failure</span>
</code></pre></div></p>
<h3 id="gslapper-architecture">gSlapper Architecture<a class="headerlink" href="#gslapper-architecture" title="Permanent link">&para;</a></h3>
<p><strong>One Process Per Wallpaper</strong> (or One Process for All):
- Each service instance manages one output
- Explicit state file persistence
- State restoration via <code>--restore</code> flag
- More detailed state (video position, pause state, options)</p>
<p><strong>Service File</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="k">[Service]</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="na">Type</span><span class="o">=</span><span class="s">notify</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="na">ExecStart</span><span class="o">=</span><span class="s">/usr/bin/gslapper --systemd --restore &lt;output&gt;</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="na">ExecReload</span><span class="o">=</span><span class="s">/bin/kill -HUP $MAINPID</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="na">Restart</span><span class="o">=</span><span class="s">on-failure</span>
</code></pre></div></p>
<h3 id="key-differences">Key Differences<a class="headerlink" href="#key-differences" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>swww</th>
<th>gSlapper</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Process Model</strong></td>
<td>Single daemon</td>
<td>One process per wallpaper (optional)</td>
</tr>
<tr>
<td><strong>State Storage</strong></td>
<td>In-memory cache</td>
<td>File-based (text)</td>
</tr>
<tr>
<td><strong>Restoration</strong></td>
<td>Automatic on daemon start</td>
<td>Explicit <code>--restore</code> flag</td>
</tr>
<tr>
<td><strong>Systemd Type</strong></td>
<td><code>simple</code></td>
<td><code>notify</code> (wait for ready)</td>
</tr>
<tr>
<td><strong>Reload Support</strong></td>
<td>No</td>
<td>Yes (<code>SIGHUP</code>)</td>
</tr>
<tr>
<td><strong>State Detail</strong></td>
<td>Cache of images</td>
<td>Full config + video position</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="future-enhancements">Future Enhancements<a class="headerlink" href="#future-enhancements" title="Permanent link">&para;</a></h2>
<p><strong>Planned</strong> (see TO_IMPLEMENT.md):
1. <strong>Playlist Support</strong> - Rotate through multiple wallpapers
2. <strong>Scheduled Wallpapers</strong> - Change based on time of day
3. <strong>State Encryption</strong> - Optional encryption for sensitive paths
4. <strong>Multiple State Profiles</strong> - Switch between wallpaper configurations</p>
<hr />
<h2 id="see-also">See Also<a class="headerlink" href="#see-also" title="Permanent link">&para;</a></h2>
<ul>
<li><strong><a href="../../systemd-service-setup/">Systemd Service Setup (User Guide)</a></strong> - End-user setup guide</li>
<li><strong><a href="#state-management-in-systemd-service">State Management (Implementation)</a></strong> - State file API</li>
<li><strong><a href="../api-reference/">API Reference</a></strong> - Full API documentation</li>
<li><strong><a href="../architecture/">Architecture</a></strong> - Overall system architecture</li>
<li><strong><a href="../../TO_IMPLEMENT.md">TO_IMPLEMENT.md</a></strong> - Future enhancements</li>
</ul>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="December 30, 2025 04:45:43 UTC">December 30, 2025</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="December 30, 2025 04:45:43 UTC">December 30, 2025</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "navigation.indexes", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>